<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PathQuest</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
* {
  font-family: 'Press Start 2P', cursive;
  box-sizing: border-box;
}

body {
  margin: 0;
  background: #ffe6f0;
  color: #5a2a3b;
  display: flex;
  height: 100vh;
}

/* SIDEBAR */
.sidebar {
  width: 200px;
  background: #ffd1e8;
  border-right: 4px solid #ff85b3;
  padding: 10px;
  overflow-y: auto;
}

.sidebar h2 {
  font-size: 11px;
  text-align: center;
  color: #d63384;
}

.qbtn {
  width: 100%;
  padding: 8px;
  margin: 4px 0;
  font-size: 10px;
  background: #ffe0ef;
  border: 2px solid #ff85b3;
  border-radius: 8px;
  cursor: pointer;
}

.qbtn.answered {
  background: #b8f2c2;
}

/* MAIN */
.main {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

.box {
  max-width: 720px;
  margin: auto;
  background: #fff0f6;
  border: 4px solid #ff9ecf;
  border-radius: 16px;
  padding: 20px;
}

h1 {
  text-align: center;
  font-size: 16px;
  color: #d63384;
}

/* MASCOT */
.mascot {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-bottom: 10px;
}

.mascot img {
  width: 60px;
}

.speech {
  background: white;
  border: 3px solid #ff85b3;
  border-radius: 12px;
  padding: 8px;
  font-size: 10px;
}

/* IMAGE BOX */
.image-box {
  border: 3px solid #ff85b3;
  border-radius: 10px;
  margin: 10px 0;
  padding: 10px;
  background: #fff;
  text-align: center;
}

.image-box img {
  max-width: 100%;
  display: block;
  margin: auto;
}

.fallback {
  font-size: 10px;
  color: #999;
  display: none;
}

/* CHOICES */
.choice {
  width: 100%;
  padding: 14px;
  margin: 8px 0;
  background: #ffe0ef;
  border: 2px solid #ff85b3;
  border-radius: 12px;
  font-size: 12px;
  line-height: 1.6;
  cursor: pointer;
}

.choice:hover {
  background: #ffb3d9;
}

.correct { background: #b8f2c2 !important; }
.wrong { background: #ffb3b3 !important; }

#explain {
  font-size: 10px;
  margin-top: 10px;
  display: none;
}

/* NAV */
.nav {
  display: flex;
  justify-content: space-between;
  margin-top: 15px;
}

.nav button {
  width: 48%;
  padding: 10px;
  font-size: 10px;
  background: #ff85b3;
  color: white;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="sidebar">
  <h2>PathQuest</h2>
  <div id="sidebarBtns"></div>
</div>

<div class="main">
  <div class="box">
    <h1>ðŸŒ¸ PathQuest ðŸŒ¸</h1>

    <div class="mascot">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Black_cat_silhouette.svg/512px-Black_cat_silhouette.svg.png">
      <div class="speech" id="speech">Letâ€™s begin ðŸ’–</div>
    </div>

    <p id="question"></p>

    <div class="image-box">
      <img id="image">
      <div class="fallback" id="fallback">
        ðŸ©º Image blocked by network<br>
        (Use local image for exams)
      </div>
    </div>

    <div id="choices"></div>
    <div id="explain"></div>

    <div class="nav">
      <button onclick="prevQ()">â¬… Back</button>
      <button onclick="nextQ()">Next âž¡</button>
    </div>
  </div>
</div>

<script>
const quiz = [
  {
    q: "What type of necrosis is shown?",
    img: "https://upload.wikimedia.org/wikipedia/commons/6/69/Coagulative_necrosis_histopathology.jpg",
    choices: ["Liquefactive","Coagulative","Caseous","Fat"],
    correct: 1,
    why: "Coagulative necrosis preserves tissue architecture."
  },
  {
    q: "Which necrosis is typical of brain infarction?",
    img: "https://upload.wikimedia.org/wikipedia/commons/4/49/Liquefactive_necrosis_brain.jpg",
    choices: ["Coagulative","Caseous","Liquefactive","Fat"],
    correct: 2,
    why: "Brain infarcts undergo liquefactive necrosis."
  }
];

let current = 0;
let answered = Array(quiz.length).fill(false);

function buildSidebar() {
  const sb = document.getElementById("sidebarBtns");
  sb.innerHTML = "";
  quiz.forEach((_, i) => {
    const b = document.createElement("button");
    b.className = "qbtn";
    b.innerText = "Q" + (i + 1);
    b.onclick = () => loadQ(i);
    sb.appendChild(b);
  });
}

function loadQ(i) {
  current = i;
  const q = quiz[i];

  document.getElementById("question").innerText = q.q;

  const img = document.getElementById("image");
  const fallback = document.getElementById("fallback");

  fallback.style.display = "none";
  img.style.display = "block";
  img.src = q.img;

  img.onerror = () => {
    img.style.display = "none";
    fallback.style.display = "block";
  };

  const c = document.getElementById("choices");
  c.innerHTML = "";

  q.choices.forEach((choice, idx) => {
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.innerText = choice;
    btn.onclick = () => answer(btn, idx);
    c.appendChild(btn);
  });

  document.getElementById("explain").style.display = "none";
}

function answer(btn, idx) {
  if (answered[current]) return;
  const q = quiz[current];
  const buttons = document.querySelectorAll(".choice");

  if (idx === q.correct) {
    btn.classList.add("correct");
    document.getElementById("speech").innerText = "âœ¨ Correct!";
  } else {
    btn.classList.add("wrong");
    buttons[q.correct].classList.add("correct");
    document.getElementById("speech").innerText = "ðŸ˜¿ Incorrect";
  }

  document.getElementById("explain").innerText = q.why;
  document.getElementById("explain").style.display = "block";
  answered[current] = true;
}

function nextQ() {
  if (current < quiz.length - 1) loadQ(current + 1);
}

function prevQ() {
  if (current > 0) loadQ(current - 1);
}

buildSidebar();
loadQ(0);
</script>

</body>
</html>
